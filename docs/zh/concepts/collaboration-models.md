---
sidebar_position: 4
---

# 协作模式

本文档介绍 Wegent 平台中的四种协作模式，帮助您选择最适合的模式来构建智能体团队。

---

## 协作模式概览

协作模式定义了 Team 中多个 Bot 之间的交互方式和工作流程。选择合适的协作模式可以显著提高团队效率和任务完成质量。

### 四种协作模式

| 模式 | 图标 | 特点 | 适用场景 |
|------|------|------|----------|
| **Pipeline** | 🔄 | 顺序执行，线性流程 | 代码开发流程、内容生产流水线 |
| **Route** | 🎯 | 智能路由，按需分配 | 客户服务、问题分类处理 |
| **Coordinate** | 👥 | 并行协调，结果汇总 | 多角度分析、并行任务处理 |
| **Collaborate** | 💬 | 自由协作，共享上下文 | 头脑风暴、复杂问题解决 |

### 选择决策树

```
开始选择协作模式
    │
    ├── 任务是否有固定顺序？
    │   └── 是 → Pipeline（流水线模式）
    │
    ├── 是否需要根据内容分配任务？
    │   └── 是 → Route（路由模式）
    │
    ├── 任务是否可以并行处理？
    │   └── 是 → Coordinate（协调模式）
    │
    └── 需要自由讨论？
        └── 是 → Collaborate（协作模式）
```

---

## 🔄 Pipeline（流水线）

### 概述

Pipeline 模式是最简单直观的协作模式，Bot 按照预定义的顺序依次执行，前一个 Bot 的输出作为下一个 Bot 的输入，形成一条完整的处理流水线。

### 工作流程

```
任务输入 → Bot 1 → Bot 2 → Bot 3 → Bot 4 → 最终结果
```

### 核心特性

- ✅ **顺序执行**: 严格按照定义的顺序执行
- ✅ **数据传递**: 前一个 Bot 的输出自动传递给下一个
- ✅ **简单清晰**: 逻辑简单，易于理解和维护
- ✅ **错误隔离**: 某一环节失败可以快速定位

### 适用场景

- **软件开发流程**: 需求分析 → 设计方案 → 编码实现 → 代码审查 → 测试验证
- **内容生产流水线**: 内容创作 → 内容编辑 → 格式排版 → 质量审核
- **数据处理管道**: 数据采集 → 数据清洗 → 数据转换 → 数据分析

---

## 🎯 Route（路由）

### 概述

Route 模式由一个 Leader Bot 根据任务内容智能地将任务路由到最合适的专家 Bot 进行处理。适合需要根据不同情况选择不同处理路径的场景。

### 工作流程

```
任务输入 → Leader Bot（路由决策）
              ├── 前端问题 → Frontend Bot
              ├── 后端问题 → Backend Bot
              ├── 数据库问题 → Database Bot
              └── DevOps问题 → DevOps Bot
                      ↓
                  处理结果
```

### 核心特性

- ✅ **智能路由**: Leader Bot 分析任务并选择最合适的专家
- ✅ **专业分工**: 每个 Bot 专注于特定领域
- ✅ **灵活高效**: 根据实际需求动态选择执行路径
- ✅ **可扩展**: 易于添加新的专家 Bot

### 适用场景

- **智能客服系统**: 客户问题 → 分类识别 → 技术支持/售后服务/销售咨询
- **技术支持平台**: 技术问题 → 问题分析 → 前端专家/后端专家/数据库专家
- **内容分发系统**: 内容提交 → 内容分类 → 新闻/科技/娱乐频道

---

## 👥 Coordinate（协调）

### 概述

Coordinate 模式由 Leader Bot 将任务分解并分配给多个 Bot 并行处理，然后收集和汇总所有 Bot 的结果，形成最终的综合输出。

### 工作流程

```
任务输入 → Leader Bot（任务分解）
              ├── 分析师 Bot ─┐
              ├── 数据 Bot ───┼→ Leader Bot（结果汇总）→ 综合结果
              └── 研究 Bot ───┘
```

### 核心特性

- ✅ **并行处理**: 多个 Bot 同时工作，提高效率
- ✅ **任务分解**: Leader 负责将复杂任务分解
- ✅ **结果汇总**: Leader 整合多个视角的输出
- ✅ **全面深入**: 从多个角度分析问题

### 适用场景

- **市场研究分析**: 市场调研任务 → 竞争对手分析/用户调研/趋势分析 → 综合报告
- **代码审查**: 代码审查任务 → 安全审查/性能审查/代码质量 → 审查报告
- **内容创作**: 文章主题 → 资料收集/案例研究/数据分析 → 完整文章

---

## 💬 Collaborate（协作）

### 概述

Collaborate 模式允许所有 Bot 在共享上下文中自由讨论和协作，没有固定的执行顺序或明确的角色划分。所有 Bot 可以看到彼此的发言，并基于整体对话进行响应。

### 工作流程

```
任务输入 → 共享上下文空间
              ↕        ↕        ↕        ↕
           Bot 1    Bot 2    Bot 3    Bot 4
              └────────┴────────┴────────┘
                         ↓
                    协作成果
```

### 核心特性

- ✅ **共享上下文**: 所有 Bot 看到完整的对话历史
- ✅ **自由发言**: 没有固定顺序，Bot 可以随时参与
- ✅ **集思广益**: 促进创意和多角度思考
- ✅ **动态交互**: Bot 可以回应其他 Bot 的观点

### 适用场景

- **头脑风暴会议**: 创意主题 → 产品经理/设计师/工程师/营销专家 → 创意方案
- **技术方案设计**: 技术挑战 → 架构师/开发者/DBA/运维工程师 → 技术方案
- **复杂问题诊断**: 系统问题 → 后端工程师/前端工程师/DBA/运维 → 问题根因

---

## 模式对比

### 功能对比表

| 特性 | Pipeline | Route | Coordinate | Collaborate |
|------|----------|-------|------------|-------------|
| **执行顺序** | 固定顺序 | 动态选择单一路径 | 并行执行 | 无固定顺序 |
| **Bot 交互** | 单向传递 | Leader → 专家 | Leader 协调 | 全员互动 |
| **上下文共享** | 部分（前后） | 独立上下文 | Leader 汇总 | 完全共享 |
| **适合团队规模** | 3-6 个 Bot | 1 Leader + N 专家 | 1 Leader + 3-5 专家 | 3-8 个 Bot |
| **执行效率** | 中等（串行） | 高（单一路径） | 高（并行） | 中等（讨论） |
| **易用性** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ |
| **灵活性** | ⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |

### 选择建议

- **流程标准化** → Pipeline
- **需要专业分工（单一专家）** → Route
- **需要专业分工（多个专家）** → Coordinate
- **需要自由讨论** → Collaborate

---

## 最佳实践

### 通用建议

1. **从简单开始**: 优先选择 Pipeline 或 Route，避免过度设计
2. **控制团队规模**: 每种模式都有推荐的 Bot 数量，过多会降低效率
3. **明确角色定义**: 每个 Bot 的职责应该清晰明确
4. **设计好 Prompt**: 好的 Prompt 结构包括角色定义、职责说明、输入输出要求

### 各模式要点

| 模式 | 关键要点 |
|------|----------|
| **Pipeline** | 控制步骤数量（≤6），每步职责单一 |
| **Route** | 路由规则清晰，包含默认处理路径 |
| **Coordinate** | Leader 需要强大的汇总能力，控制并行数量（3-5） |
| **Collaborate** | 定义清晰目标，设置讨论终止条件 |

---

## 相关文档

- [核心概念](./core-concepts.md) - 理解 Bot、Team 等核心概念
- [YAML 配置规范](../reference/yaml-specification.md) - 完整的配置格式说明
- [协作模式开发指南](../developer-guide/collaboration-models-guide.md) - 详细配置示例和实战案例

---

<p align="center">选择合适的协作模式是成功的关键! 🚀</p>
