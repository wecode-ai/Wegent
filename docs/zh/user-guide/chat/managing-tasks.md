---
sidebar_position: 5
---

# 创建对话

本指南介绍如何在 Wegent 前端创建对话类型的任务，与 AI 智能体进行交互。

---

## 📋 目录

- [什么是对话](#-什么是对话)
- [创建对话](#-创建对话)
- [对话界面](#-对话界面)
- [高级功能](#-高级功能)
- [最佳实践](#-最佳实践)
- [常见问题](#-常见问题)
- [相关资源](#-相关资源)

---

## 💬 什么是对话

在 Wegent 中，对话是用户与 AI 智能体交互的基本方式。每次对话会创建一个 Task（任务），记录完整的对话历史。

**核心概念**:
```
对话 = 用户消息 + 智能体 + 上下文 + 对话历史
```

### 对话的组成要素

| 要素 | 说明 | 示例 |
|------|------|------|
| **消息** | 用户输入的问题或指令 | "帮我分析这份报告" |
| **智能体** | 执行任务的 AI 团队 | 数据分析智能体 |
| **上下文** | 附加的知识库、文件等 | 项目文档、数据文件 |
| **状态** | 对话执行状态 | PENDING → RUNNING → COMPLETED |

---

## 🚀 创建对话

### 步骤 1: 进入对话页面

1. 点击左侧导航栏的 **"对话"** 或 **"Chat"**
2. 系统会显示对话列表和输入区域

### 步骤 2: 选择智能体

在输入区域上方，点击智能体选择器：

1. **点击智能体下拉框** - 显示可用的智能体列表
2. **选择合适的智能体** 

### 步骤 3: 配置对话选项（可选）

根据需要配置以下选项：

#### 模型选择

点击模型选择器可以覆盖智能体的默认模型：

- **选择模型**: 从下拉列表选择可用模型
- **强制覆盖**: 启用后即使智能体已配置模型也会使用您选择的模型

#### 代码仓库（Code 类型）

如果选择了 Code 类型的智能体：

1. **选择仓库**: 点击仓库选择器，选择目标代码仓库
2. **选择分支**: 选择要操作的分支

#### 知识库上下文

点击上下文按钮添加知识库：

1. **点击 "#" 按钮** - 打开上下文选择器
2. **选择知识库** - 勾选要添加的知识库
3. **确认选择** - 知识库会显示为标签

#### 文件附件

点击附件按钮上传文件：

1. **点击附件图标** - 打开文件选择器
2. **选择文件** - 支持图片、文档、代码文件
3. **等待上传** - 文件上传后会显示预览

#### 技能选择

如果智能体支持技能：

1. **点击技能按钮** - 打开技能选择器
2. **选择技能** - 勾选需要的技能
3. **或使用 "/" 命令** - 在输入框输入 `/` 触发技能选择

### 步骤 4: 输入消息并发送

1. **在输入框输入消息** - 描述您的需求
2. **按 Enter 发送** - 或点击发送按钮
3. **等待响应** - 智能体开始处理并流式返回结果

---

## 🖥️ 对话界面

### 输入区域

输入区域包含以下控件：

| 控件 | 功能 | 位置 |
|------|------|------|
| **智能体选择器** | 选择执行任务的智能体 | 输入框上方 |
| **模型选择器** | 覆盖默认模型 | 控制栏 |
| **上下文按钮** | 添加知识库 | 控制栏 |
| **附件按钮** | 上传文件 | 控制栏 |
| **技能按钮** | 选择技能 | 控制栏 |
| **澄清按钮** | 启用澄清模式 | 控制栏 |
| **纠错按钮** | 启用纠错模式 | 控制栏 |
| **发送按钮** | 发送消息 | 输入框右侧 |

### 消息区域

消息区域显示对话历史：

- **用户消息**: 您发送的消息，显示在右侧
- **AI 响应**: 智能体的回复，显示在左侧
  - 文本内容
  - 代码块（带语法高亮）
  - 思考过程（如果启用）
  - 工具调用指示器

### 侧边栏

左侧侧边栏显示：

- **对话列表**: 所有历史对话
- **搜索框**: 搜索对话内容
- **新建对话按钮**: 开始新对话

---

## ⚡ 高级功能

### 单次对话模型选择

在不修改智能体配置的情况下，为单次对话选择不同模型：

1. **点击模型选择器** - 在输入控制栏
2. **选择模型** - 从可用模型列表选择
3. **启用强制覆盖** - 确保使用选择的模型

**使用场景**:
- 复杂任务使用更强大的模型
- 简单查询使用更快/更便宜的模型
- 测试不同模型的效果

### 澄清模式

启用澄清模式让智能体在执行前确认需求：

1. **点击澄清图标** (💬) - 在输入控制栏
2. **智能体会先提问** - 确认您的需求细节
3. **回答问题后** - 智能体开始执行任务

> 📖 详细说明请参阅 [澄清模式指南](./clarification-mode-guide.md)

### 纠错模式

启用纠错模式让另一个 AI 模型验证和改进回答：

1. **点击纠错图标** (✓) - 在输入控制栏
2. **选择纠错模型** - 从弹出的对话框中选择
3. **查看评估结果** - 智能体回答后会显示评分和改进建议
4. **应用改进**（可选）- 点击"应用"按钮采纳改进版本

> 📖 详细说明请参阅 [纠错模式指南](./correction-mode-guide.md)

### 文件附件

上传文件提供上下文：

1. **点击附件按钮** (📎)
2. **选择文件** - 支持多种格式
3. **支持的格式**: 图片、PDF、Word、代码文件
4. **粘贴上传**: 直接粘贴剪贴板中的图片

### 知识库上下文

添加知识库增强智能体能力：

1. **点击上下文选择器**
2. **选择知识库** - 可多选
3. **智能体会搜索知识库** - 提供更准确的回答

### 技能选择

为智能体添加额外能力：

1. **点击技能按钮** - 打开技能选择器
2. **选择技能** - 勾选需要的技能
3. **或输入 "/" 命令** - 快速选择技能
4. **技能按需加载** - 执行时动态加载

---

## ✨ 最佳实践

### 1. 编写有效的提示

#### ✅ 具体明确

- 清晰描述您的需求
- 提供必要的背景信息
- 说明期望的输出格式
- 包含验收标准

#### ❌ 避免模糊

- 避免过于简短的描述
- 避免缺少上下文的请求
- 避免一次性提出过多需求

### 2. 选择合适的智能体


### 3. 任务粒度

**推荐粒度**:
- 小任务: 单一明确的目标
- 中等任务: 包含几个相关步骤
- 大任务: 拆分成多个小任务

### 4. 提供充足上下文

- 上传相关文件
- 添加知识库
- 引用之前的对话内容
- 说明技术约束或偏好

### 5. 利用对话历史

- 继续对话进行迭代优化
- 引用之前的消息提供上下文

---

## ⚠️ 常见问题

### Q1: 对话一直处于 PENDING 状态？

**可能原因**:
1. 智能体不可用
2. 系统资源受限

**解决方案**:
- 在设置 → 智能体中检查智能体状态
- 验证代码仓库访问权限
- 尝试选择其他智能体

### Q2: 智能体响应不完整？

**解决方案**:
- 点击"继续"恢复生成
- 选择更大上下文窗口的模型
- 将复杂任务拆分成小部分

### Q3: 如何停止正在运行的对话？

**方法**:
1. 点击输入区域的"停止"按钮
2. 智能体会停止处理
3. 您可以继续对话或开始新任务

### Q4: 如何重试失败的对话？

**方法**:
1. 点击失败消息上的"重试"按钮
2. 可选择在重试前修改消息
3. 智能体会重新尝试任务

### Q5: 如何分享对话？

**方法**:
1. 点击消息区域的分享按钮
2. 复制生成的链接
3. 分享给团队成员（需要访问权限）

### Q6: 如何导出对话历史？

**方法**:
1. 点击任务菜单中的导出按钮
2. 选择导出格式（Markdown、JSON）
3. 下载对话历史

---

## 🔗 相关资源

### 前置步骤
- [智能体设置](../settings/agent-settings.md) - 配置智能体和机器人
- [配置模型](../settings/configuring-models.md) - 设置 AI 模型
- [配置 Shell](../settings/configuring-shells.md) - 配置执行环境

### 参考文档
- [核心概念](../../concepts/core-concepts.md) - 理解 Wegent 概念
- [协作模式](../../concepts/collaboration-models.md) - 多智能体协作

### 详细功能文档

更多高级功能的详细说明，请参阅：
- [澄清模式指南](./clarification-mode-guide.md) - 让智能体在执行前确认需求
- [纠错模式指南](./correction-mode-guide.md) - 使用另一个模型验证和改进回答
- [IM 渠道集成](./im-channel-integration.md) - 集成企业 IM

---

## 💬 获取帮助

遇到问题？

- 📖 查看 [FAQ](../../faq.md)
- 🐛 提交 [GitHub Issue](https://github.com/AntGroup/Wegent/issues)
- 💬 加入社区讨论

---

<p align="center">开始您的第一次对话，让 AI 智能体为您工作！ 🚀</p>
