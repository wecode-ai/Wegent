---
sidebar_position: 2
---

# 创建订阅器

本指南介绍如何创建和配置订阅器，实现 AI 任务的自动化执行。

---

## 📋 创建流程

### 步骤 1：进入创建页面

1. 点击左侧导航栏的 **Feed**
2. 点击 **新建订阅器** 按钮

### 步骤 2：填写基本信息

| 字段 | 必填 | 说明 |
|------|------|------|
| **名称** | ✅ | 订阅器的显示名称，如"每日汇报" |
| **描述** | ❌ | 简要描述订阅器的用途 |
| **任务类型** | ✅ | 信息采集类或执行类 |
| **智能体** | ✅ | 选择执行任务的智能体 |

#### 任务类型说明

| 类型 | 说明 | 适用场景 |
|------|------|----------|
| **信息采集类** | 收集和汇总信息 | 新闻摘要、数据报告、监控分析 |
| **执行类** | 执行任务和操作 | 代码审查、文档更新、自动化测试 |

### 步骤 3：配置触发方式

选择订阅器的触发方式：

| 触发方式 | 说明 | 示例 |
|----------|------|------|
| **定时计划** | 使用 Cron 表达式 | 每天上午 9 点 |
| **固定间隔** | 按固定时间间隔 | 每 2 小时 |
| **一次性定时** | 指定时间执行一次 | 明天下午 3 点 |
| **事件触发** | Webhook 或 Git Push | 收到 Webhook 请求时 |

> 📖 详细说明请参阅 [触发方式](./trigger-types.md)

### 步骤 4：编写 Prompt 模板

在 Prompt 模板中描述要执行的任务：

```
请帮我汇总今天（{{date}}）的科技新闻，包括：
1. AI 领域的重要进展
2. 大型科技公司的动态
3. 值得关注的创业公司

请以简洁的要点形式呈现。
```

#### 支持的变量

| 变量 | 说明 | 示例值 |
|------|------|--------|
| `{{date}}` | 当前日期 | 2024-01-15 |
| `{{time}}` | 当前时间 | 09:00:00 |
| `{{datetime}}` | 日期时间 | 2024-01-15 09:00:00 |
| `{{subscription_name}}` | 订阅器名称 | 每日新闻摘要 |
| `{{webhook_data}}` | Webhook 请求数据 | `{"event": "push"}` |

### 步骤 5：高级配置（可选）

#### 代码仓库设置

如果选择了编程类智能体，需要配置代码仓库：

1. **选择仓库**：从已连接的仓库中选择
2. **选择分支**：指定要操作的分支

#### 模型设置

可以覆盖智能体的默认模型：

1. 点击模型选择器
2. 选择要使用的模型
3. 如果智能体未配置模型，此项为必填

#### 执行配置

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| **失败重试次数** | 执行失败后的重试次数 | 0（不重试） |
| **执行超时时间** | AI 完成任务的最大时间 | 10 分钟 |
| **保留对话历史** | AI 可以看到之前的执行记录 | 关闭 |

#### 可见性设置

| 可见性 | 说明 |
|--------|------|
| **私有** | 仅自己可见 |
| **公开** | 其他用户可以发现和关注 |
| **市场** | 其他用户可以租用 |

### 步骤 6：保存订阅器

1. 确认 **启用订阅器** 开关已打开
2. 点击 **创建** 按钮
3. 订阅器将按设定的触发条件自动执行

---

## ✏️ 编辑订阅器

### 修改配置

1. 在订阅器列表中找到目标订阅器
2. 点击 **编辑** 按钮（铅笔图标）
3. 修改需要更改的配置
4. 点击 **保存**

### 启用/禁用

使用订阅器右侧的开关可以快速启用或禁用：

- **启用**：订阅器将按触发条件执行
- **禁用**：订阅器暂停执行，但保留配置

### 立即执行

点击 **立即执行** 按钮（播放图标）可以手动触发一次执行，不影响正常的定时计划。

---

## 🗑️ 删除订阅器

1. 点击订阅器的 **删除** 按钮（垃圾桶图标）
2. 在确认对话框中点击 **删除**

> ⚠️ 删除操作无法撤销，执行历史也会被删除

---

## 💡 最佳实践

### 1. 清晰的命名

使用描述性的名称，便于识别：

- ✅ "每日科技新闻摘要"
- ✅ "周一代码质量检查"
- ❌ "订阅器1"

### 2. 详细的 Prompt

提供足够的上下文和明确的要求：

```
# 好的 Prompt
请分析最近一周的用户反馈数据，重点关注：
1. 用户满意度趋势
2. 常见问题分类
3. 改进建议

输出格式：Markdown 表格 + 简要总结

# 不好的 Prompt
分析用户反馈
```

### 3. 合理的触发频率

根据任务性质选择合适的频率：

| 任务类型 | 建议频率 |
|----------|----------|
| 新闻摘要 | 每天 1-2 次 |
| 数据监控 | 每小时或每 2 小时 |
| 周报生成 | 每周一次 |
| 紧急告警 | 使用 Webhook 实时触发 |

### 4. 使用对话历史

对于需要追踪变化的任务，启用"保留对话历史"：

- AI 可以对比之前的执行结果
- 识别数据变化趋势
- 避免重复报告相同内容

---

## ⚠️ 常见问题

### Q1：订阅器创建后没有执行？

**检查项**：
1. 确认订阅器已启用（开关为开启状态）
2. 检查触发时间是否已到
3. 确认智能体配置正确

### Q2：执行失败怎么办？

**解决方案**：
1. 查看执行记录中的错误信息
2. 检查 Prompt 是否清晰
3. 确认智能体和模型配置正确
4. 适当增加超时时间

### Q3：如何复制订阅器？

目前不支持直接复制，可以：
1. 记录现有订阅器的配置
2. 创建新订阅器并填入相同配置

---

## 🔗 相关文档

- [触发方式](./trigger-types.md) - 各种触发方式的详细配置
- [动态时间线](./timeline.md) - 查看执行结果
- [智能体设置](../settings/agent-settings.md) - 配置智能体
