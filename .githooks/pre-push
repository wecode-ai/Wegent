#!/bin/bash
# =============================================================================
# Pre-push Hook - AI Code Quality Check
# =============================================================================
# This hook runs quality checks before push for AI coding agents.
# It directly calls the ai-push-gate.sh script without requiring pre-commit.
#
# Usage:
#   git push                    (runs all checks)
#   AI_VERIFIED=1 git push      (skip doc reminders after review)
#   git push --no-verify        (skip all checks - not recommended)
# =============================================================================

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(cd "$SCRIPT_DIR/.." && pwd)"

# Change to project root
cd "$PROJECT_ROOT"

# Run the AI push gate script
if [ -f "scripts/hooks/ai-push-gate.sh" ]; then
    bash scripts/hooks/ai-push-gate.sh
    exit $?
fi

# If the script doesn't exist, just pass
echo "⚠️ scripts/hooks/ai-push-gate.sh not found, skipping checks."
exit 0